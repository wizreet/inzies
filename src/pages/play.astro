---
import { Icon } from "astro-icon/components";
import MainLayout from "../layouts/MainLayout.astro";
import SongPlayer from "../components/music/SongPlayer.svelte";
import { songs } from "../data/songs";

// Convert readonly songs to mutable for Svelte component
const songsData = songs.map((s) => ({
	id: s.id,
	title: s.title,
	album: s.album,
	description: s.description,
	coverArt: s.coverArt,
	pattern: s.pattern,
	strudelUrl: s.strudelUrl,
	bpm: s.bpm,
	duration: s.duration,
}));
---

<MainLayout title="Play Along" description="Play our songs in your browser with Strudel.">
	<!-- Page Header -->
	<div class="mb-12">
		<h1 class="section-title mb-6 text-4xl md:text-5xl">Play Along</h1>
		<p class="max-w-3xl text-xl text-[var(--text-secondary)]">
			Select a song and hit play. Each song is recreated as a live-coding pattern you can remix.
		</p>
	</div>

	<!-- Song Player -->
	<section class="mb-20">
		<SongPlayer client:load songs={songsData} />
	</section>

	<!-- What is this? -->
	<section class="mb-20">
		<div class="card-base p-8">
			<h2 class="mb-4 text-2xl font-bold">What's Strudel?</h2>
			<p class="mb-4 text-[var(--text-secondary)]">
				Strudel is a live coding platform that runs in your browser. Each of our songs is recreated
				as a pattern you can play, modify, and remix in real-time.
			</p>
			<p class="mb-6 text-[var(--text-secondary)]">
				Click "Open in Strudel" to get the full experience - change the code, hear the changes
				instantly.
			</p>
			<a
				href="https://strudel.cc"
				target="_blank"
				rel="noopener noreferrer"
				class="inline-flex items-center gap-2 text-inzies-blue transition-colors hover:text-inzies-blue-400"
			>
				<Icon name="material-symbols:open-in-new" />
				Learn more at strudel.cc
			</a>
		</div>
	</section>
</MainLayout>
